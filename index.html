<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Khalil's Histoire</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="space-bg"></div>
    <div class="stars" aria-hidden="true"></div>

    <header class="topbar glass">
      <h1>Khalil's Histoire</h1>
      <button id="postStoryBtn" class="btn btn-primary">Poster une histoire</button>
    </header>

    <main class="layout">
      <nav class="tabs glass" role="tablist" aria-label="Sections">
        <button class="tab is-active" data-tab="home" role="tab" aria-selected="true">Accueil</button>
        <button class="tab" data-tab="account" role="tab" aria-selected="false">Mon compte</button>
        <button class="tab" data-tab="my-stories" role="tab" aria-selected="false">Mes histoires</button>
      </nav>

      <section id="home" class="panel glass is-visible" role="tabpanel">
        <h2>Toutes les histoires</h2>
        <p class="muted">Toutes les histoires post√©es par les utilisateurs apparaissent ici en temps r√©el.</p>
        <div id="allStories" class="story-list"></div>
      </section>

      <section id="account" class="panel glass" role="tabpanel">
        <h2>Mon compte</h2>
        <div id="accountCard" class="account-card"></div>
        <h3>Mes histoires publi√©es</h3>
        <div id="accountStories" class="story-list"></div>
      </section>

      <section id="my-stories" class="panel glass" role="tabpanel">
        <h2>Mes histoires</h2>
        <div id="myStories" class="story-list"></div>
      </section>
    </main>

    <dialog id="authDialog" class="modal">
      <form id="authForm" class="modal-content">
        <h3>Connectez-vous</h3>
        <label>
          Pseudo
          <input id="authUsername" required minlength="3" maxlength="32" />
        </label>
        <label>
          Mot de passe
          <input id="authPassword" type="password" required minlength="4" maxlength="64" />
        </label>
        <p id="authError" class="error" role="alert"></p>
        <menu>
          <button class="btn btn-primary" type="submit">Se connecter</button>
          <button id="registerBtn" class="btn btn-ghost" type="button">Cr√©er un compte</button>
          <button id="closeAuthBtn" class="btn btn-ghost" type="button">Fermer</button>
        </menu>
      </form>
    </dialog>

    <dialog id="storyDialog" class="modal">
      <form id="storyForm" class="modal-content">
        <h3>Nouvelle histoire</h3>
        <label>
          Titre
          <input id="storyTitle" required maxlength="120" />
        </label>
        <label>
          Histoire
          <textarea id="storyContent" required rows="10" placeholder="√âcrivez votre histoire..."></textarea>
        </label>
        <menu>
          <button class="btn btn-primary" type="submit">Publier</button>
          <button id="cancelStoryBtn" class="btn btn-ghost" type="button">Annuler</button>
        </menu>
      </form>
    </dialog>


    <dialog id="deleteDialog" class="modal">
      <div class="modal-content">
        <h3>Vous voulez vraiment supprimer ?</h3>
        <p>Cette action est d√©finitive.</p>
        <menu>
          <button id="confirmDeleteBtn" class="btn btn-primary" type="button">Oui, supprimer</button>
          <button id="cancelDeleteBtn" class="btn btn-ghost" type="button">Annuler</button>
        </menu>
      </div>
    </dialog>

    <div id="publishEmoji" class="publish-emoji" aria-live="polite">üéâ</div>

    <script>
      window.__FIREBASE_CONFIG__ = window.__FIREBASE_CONFIG__ || null;
    </script>
    <script type="module" src="app.js"></script>
  </body>
</html>
